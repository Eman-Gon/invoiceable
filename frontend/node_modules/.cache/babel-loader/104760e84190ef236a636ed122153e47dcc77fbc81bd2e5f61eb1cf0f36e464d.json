{"ast":null,"code":"var _jsxFileName = \"/Users/noahgallego/Desktop/invoiceable-main/frontend/src/components/InvoiceProcessor.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { documentAPI, chatAPI } from '../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst InvoiceProcessor = ({\n  files,\n  isProcessing,\n  onProcessed,\n  onProcessingComplete,\n  onSessionCreated\n}) => {\n  _s();\n  const [processingStatus, setProcessingStatus] = useState([]);\n  const [currentIndex, setCurrentIndex] = useState(0);\n  const processInvoices = useCallback(async () => {\n    if (!files || files.length === 0) return;\n    console.log('🚀 Starting to process invoices...');\n    setProcessingStatus(files.map(f => ({\n      id: f.id,\n      status: 'pending',\n      error: null\n    })));\n    const processedResults = [];\n    for (let i = 0; i < files.length; i++) {\n      const file = files[i];\n      setCurrentIndex(i);\n      try {\n        console.log(`📄 Processing file ${i + 1}/${files.length}: ${file.name}`);\n\n        // Update status to processing\n        setProcessingStatus(prev => prev.map(s => s.id === file.id ? {\n          ...s,\n          status: 'processing'\n        } : s));\n\n        // Convert file to base64\n        const fileContent = await fileToBase64(file.file);\n        const requestData = {\n          file_data: fileContent,\n          file_name: file.name,\n          document_type: 'invoice'\n        };\n\n        // Process the document\n        const result = await documentAPI.processDocument(requestData);\n        if (result.success) {\n          console.log(`✅ Successfully processed: ${file.name}`);\n          console.log('Result structure:', result);\n\n          // Map the structured_data to data for UI compatibility\n          const resultWithStatus = {\n            ...result,\n            status: 'success',\n            data: result.structured_data || {},\n            // Map structured_data to data\n            confidence: Math.round((result.extraction_confidence || 0) * 100),\n            // Convert to percentage\n            id: file.id,\n            document_name: result.document_name || file.name,\n            rawText: result.raw_text || '',\n            // Add raw text for preview\n            validation: result.validation || null,\n            // Add validation data\n            extraction_metadata: result.extraction_metadata || {},\n            // Add metadata for page count\n            fileData: fileContent,\n            // Store original file data for PDF preview\n            fileType: file.file.type // Store file type\n          };\n          processedResults.push(resultWithStatus);\n\n          // Update status to completed\n          setProcessingStatus(prev => prev.map(s => s.id === file.id ? {\n            ...s,\n            status: 'completed'\n          } : s));\n        } else {\n          throw new Error(result.error || 'Processing failed');\n        }\n      } catch (error) {\n        var _error$response, _error$response$data, _error$response2, _error$response2$data;\n        console.error(`❌ Error processing ${file.name}:`, error);\n        console.error('Error details:', {\n          message: error.message,\n          stack: error.stack,\n          response: error.response\n        });\n\n        // Get a meaningful error message\n        let errorMessage = 'Processing failed';\n        if ((_error$response = error.response) !== null && _error$response !== void 0 && (_error$response$data = _error$response.data) !== null && _error$response$data !== void 0 && _error$response$data.detail) {\n          errorMessage = error.response.data.detail;\n        } else if (error.message) {\n          errorMessage = error.message;\n        } else if ((_error$response2 = error.response) !== null && _error$response2 !== void 0 && (_error$response2$data = _error$response2.data) !== null && _error$response2$data !== void 0 && _error$response2$data.error) {\n          errorMessage = error.response.data.error;\n        }\n\n        // Update status to error\n        setProcessingStatus(prev => prev.map(s => s.id === file.id ? {\n          ...s,\n          status: 'error',\n          error: errorMessage\n        } : s));\n      }\n    }\n\n    // Update processed invoices\n    onProcessed(processedResults);\n\n    // Create chat session if we have any successful results\n    if (processedResults.length > 0) {\n      try {\n        console.log('🎯 Creating chat session with processed invoices...');\n        const sessionResponse = await chatAPI.createSession(processedResults);\n        if (sessionResponse.success) {\n          console.log(`✅ Chat session created: ${sessionResponse.session_id}`);\n          onSessionCreated && onSessionCreated(sessionResponse.session_id);\n        }\n      } catch (error) {\n        console.error('❌ Error creating chat session:', error);\n      }\n    }\n\n    // Mark processing as complete\n    onProcessingComplete();\n    console.log('🏁 Processing complete!');\n  }, [files, onProcessed, onProcessingComplete, onSessionCreated]);\n\n  // Start processing when files change and we're in processing mode\n  useEffect(() => {\n    if (isProcessing && files.length > 0) {\n      processInvoices();\n    }\n  }, [isProcessing, files, processInvoices]);\n\n  // Helper function to convert file to base64\n  const fileToBase64 = file => {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.readAsDataURL(file);\n      reader.onload = () => {\n        // Remove the data:mime/type;base64, prefix\n        const base64 = reader.result.split(',')[1];\n        resolve(base64);\n      };\n      reader.onerror = error => reject(error);\n    });\n  };\n  if (!isProcessing) {\n    return null;\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white rounded-lg shadow p-6 mb-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"animate-spin rounded-full h-5 w-5 border-b-2 border-primary-600 mr-3\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-lg font-medium text-gray-900\",\n        children: [\"Processing Invoices (\", currentIndex + 1, \" of \", files.length, \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-3\",\n      children: files.map((file, index) => {\n        const status = processingStatus.find(s => s.id === file.id);\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between p-3 bg-gray-50 rounded\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-shrink-0 mr-3\",\n              children: [(status === null || status === void 0 ? void 0 : status.status) === 'pending' && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-4 h-4 bg-gray-300 rounded-full\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 160,\n                columnNumber: 21\n              }, this), (status === null || status === void 0 ? void 0 : status.status) === 'processing' && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-4 h-4 bg-primary-500 rounded-full animate-pulse\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 163,\n                columnNumber: 21\n              }, this), (status === null || status === void 0 ? void 0 : status.status) === 'completed' && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-4 h-4 bg-green-500 rounded-full flex items-center justify-center\",\n                children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                  className: \"w-2 h-2 text-white\",\n                  fill: \"currentColor\",\n                  viewBox: \"0 0 20 20\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    fillRule: \"evenodd\",\n                    d: \"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\",\n                    clipRule: \"evenodd\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 168,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 167,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 166,\n                columnNumber: 21\n              }, this), (status === null || status === void 0 ? void 0 : status.status) === 'error' && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-4 h-4 bg-red-500 rounded-full flex items-center justify-center\",\n                children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                  className: \"w-2 h-2 text-white\",\n                  fill: \"currentColor\",\n                  viewBox: \"0 0 20 20\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    fillRule: \"evenodd\",\n                    d: \"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\",\n                    clipRule: \"evenodd\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 175,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 174,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 173,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm font-medium text-gray-900\",\n                children: file.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 182,\n                columnNumber: 19\n              }, this), (status === null || status === void 0 ? void 0 : status.error) && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-xs text-red-600\",\n                children: status.error\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-xs text-gray-500 capitalize\",\n            children: (status === null || status === void 0 ? void 0 : status.status) || 'pending'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 15\n          }, this)]\n        }, file.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-4 text-sm text-gray-600\",\n      children: \"Processing documents and preparing chat session...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 143,\n    columnNumber: 5\n  }, this);\n};\n_s(InvoiceProcessor, \"2R0Rsy3X1WKfjrYk3HlLKwNCaPw=\");\n_c = InvoiceProcessor;\nexport default InvoiceProcessor;\nvar _c;\n$RefreshReg$(_c, \"InvoiceProcessor\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","documentAPI","chatAPI","jsxDEV","_jsxDEV","InvoiceProcessor","files","isProcessing","onProcessed","onProcessingComplete","onSessionCreated","_s","processingStatus","setProcessingStatus","currentIndex","setCurrentIndex","processInvoices","length","console","log","map","f","id","status","error","processedResults","i","file","name","prev","s","fileContent","fileToBase64","requestData","file_data","file_name","document_type","result","processDocument","success","resultWithStatus","data","structured_data","confidence","Math","round","extraction_confidence","document_name","rawText","raw_text","validation","extraction_metadata","fileData","fileType","type","push","Error","_error$response","_error$response$data","_error$response2","_error$response2$data","message","stack","response","errorMessage","detail","sessionResponse","createSession","session_id","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","base64","split","onerror","className","children","fileName","_jsxFileName","lineNumber","columnNumber","index","find","fill","viewBox","fillRule","d","clipRule","_c","$RefreshReg$"],"sources":["/Users/noahgallego/Desktop/invoiceable-main/frontend/src/components/InvoiceProcessor.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { documentAPI, chatAPI } from '../services/api';\n\nconst InvoiceProcessor = ({ files, isProcessing, onProcessed, onProcessingComplete, onSessionCreated }) => {\n  const [processingStatus, setProcessingStatus] = useState([]);\n  const [currentIndex, setCurrentIndex] = useState(0);\n\n  const processInvoices = useCallback(async () => {\n    if (!files || files.length === 0) return;\n\n    console.log('🚀 Starting to process invoices...');\n    setProcessingStatus(files.map(f => ({ id: f.id, status: 'pending', error: null })));\n    \n    const processedResults = [];\n\n    for (let i = 0; i < files.length; i++) {\n      const file = files[i];\n      setCurrentIndex(i);\n      \n      try {\n        console.log(`📄 Processing file ${i + 1}/${files.length}: ${file.name}`);\n        \n        // Update status to processing\n        setProcessingStatus(prev => \n          prev.map(s => s.id === file.id ? { ...s, status: 'processing' } : s)\n        );\n\n        // Convert file to base64\n        const fileContent = await fileToBase64(file.file);\n        \n        const requestData = {\n          file_data: fileContent,\n          file_name: file.name,\n          document_type: 'invoice'\n        };\n\n        // Process the document\n        const result = await documentAPI.processDocument(requestData);\n        \n        if (result.success) {\n          console.log(`✅ Successfully processed: ${file.name}`);\n          console.log('Result structure:', result);\n          \n          // Map the structured_data to data for UI compatibility\n          const resultWithStatus = {\n            ...result,\n            status: 'success',\n            data: result.structured_data || {},  // Map structured_data to data\n            confidence: Math.round((result.extraction_confidence || 0) * 100),  // Convert to percentage\n            id: file.id,\n            document_name: result.document_name || file.name,\n            rawText: result.raw_text || '',  // Add raw text for preview\n            validation: result.validation || null,  // Add validation data\n            extraction_metadata: result.extraction_metadata || {},  // Add metadata for page count\n            fileData: fileContent,  // Store original file data for PDF preview\n            fileType: file.file.type  // Store file type\n          };\n          processedResults.push(resultWithStatus);\n          \n          // Update status to completed\n          setProcessingStatus(prev => \n            prev.map(s => s.id === file.id ? { ...s, status: 'completed' } : s)\n          );\n        } else {\n          throw new Error(result.error || 'Processing failed');\n        }\n        \n      } catch (error) {\n        console.error(`❌ Error processing ${file.name}:`, error);\n        console.error('Error details:', {\n          message: error.message,\n          stack: error.stack,\n          response: error.response\n        });\n        \n        // Get a meaningful error message\n        let errorMessage = 'Processing failed';\n        if (error.response?.data?.detail) {\n          errorMessage = error.response.data.detail;\n        } else if (error.message) {\n          errorMessage = error.message;\n        } else if (error.response?.data?.error) {\n          errorMessage = error.response.data.error;\n        }\n        \n        // Update status to error\n        setProcessingStatus(prev => \n          prev.map(s => s.id === file.id ? { ...s, status: 'error', error: errorMessage } : s)\n        );\n      }\n    }\n\n    // Update processed invoices\n    onProcessed(processedResults);\n    \n    // Create chat session if we have any successful results\n    if (processedResults.length > 0) {\n      try {\n        console.log('🎯 Creating chat session with processed invoices...');\n        const sessionResponse = await chatAPI.createSession(processedResults);\n        \n        if (sessionResponse.success) {\n          console.log(`✅ Chat session created: ${sessionResponse.session_id}`);\n          onSessionCreated && onSessionCreated(sessionResponse.session_id);\n        }\n      } catch (error) {\n        console.error('❌ Error creating chat session:', error);\n      }\n    }\n    \n    // Mark processing as complete\n    onProcessingComplete();\n    console.log('🏁 Processing complete!');\n    \n  }, [files, onProcessed, onProcessingComplete, onSessionCreated]);\n\n  // Start processing when files change and we're in processing mode\n  useEffect(() => {\n    if (isProcessing && files.length > 0) {\n      processInvoices();\n    }\n  }, [isProcessing, files, processInvoices]);\n\n  // Helper function to convert file to base64\n  const fileToBase64 = (file) => {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.readAsDataURL(file);\n      reader.onload = () => {\n        // Remove the data:mime/type;base64, prefix\n        const base64 = reader.result.split(',')[1];\n        resolve(base64);\n      };\n      reader.onerror = error => reject(error);\n    });\n  };\n\n  if (!isProcessing) {\n    return null;\n  }\n\n  return (\n    <div className=\"bg-white rounded-lg shadow p-6 mb-6\">\n      <div className=\"flex items-center mb-4\">\n        <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-primary-600 mr-3\"></div>\n        <h3 className=\"text-lg font-medium text-gray-900\">\n          Processing Invoices ({currentIndex + 1} of {files.length})\n        </h3>\n      </div>\n      \n      <div className=\"space-y-3\">\n        {files.map((file, index) => {\n          const status = processingStatus.find(s => s.id === file.id);\n          \n          return (\n            <div key={file.id} className=\"flex items-center justify-between p-3 bg-gray-50 rounded\">\n              <div className=\"flex items-center\">\n                <div className=\"flex-shrink-0 mr-3\">\n                  {status?.status === 'pending' && (\n                    <div className=\"w-4 h-4 bg-gray-300 rounded-full\"></div>\n                  )}\n                  {status?.status === 'processing' && (\n                    <div className=\"w-4 h-4 bg-primary-500 rounded-full animate-pulse\"></div>\n                  )}\n                  {status?.status === 'completed' && (\n                    <div className=\"w-4 h-4 bg-green-500 rounded-full flex items-center justify-center\">\n                      <svg className=\"w-2 h-2 text-white\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                        <path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\" />\n                      </svg>\n                    </div>\n                  )}\n                  {status?.status === 'error' && (\n                    <div className=\"w-4 h-4 bg-red-500 rounded-full flex items-center justify-center\">\n                      <svg className=\"w-2 h-2 text-white\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                        <path fillRule=\"evenodd\" d=\"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\" clipRule=\"evenodd\" />\n                      </svg>\n                    </div>\n                  )}\n                </div>\n                \n                <div>\n                  <p className=\"text-sm font-medium text-gray-900\">{file.name}</p>\n                  {status?.error && (\n                    <p className=\"text-xs text-red-600\">{status.error}</p>\n                  )}\n                </div>\n              </div>\n              \n              <div className=\"text-xs text-gray-500 capitalize\">\n                {status?.status || 'pending'}\n              </div>\n            </div>\n          );\n        })}\n      </div>\n      \n      <div className=\"mt-4 text-sm text-gray-600\">\n        Processing documents and preparing chat session...\n      </div>\n    </div>\n  );\n};\n\nexport default InvoiceProcessor; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}